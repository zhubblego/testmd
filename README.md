# 缓冲数据文件设计
## 简介##
在实现直播回看功能时，需要在硬盘中保存直播流数据，因此需要直播流缓冲数据文件。这个文件提供给存储服务使用。

## 文件结构设计

| 缓冲文件结构 |
| ------  |
|文件头|	
|读索引|	
|写索引|	
|数据实体|	

### 文件结构详细说明
* 文件头

| 属性                    | 数据类型 |说明        |
|-------------------------|------------|------------|
| magic_words             | uint32_t|表示是一个mbs的数据缓冲文件 |
| version                 | uint8_t|文件版本 |
| encryption              | uint8_t|是否加密 |
| videocodec              | uint8_t|视频编码器 |
| audiocodec              | uint8_t|音频编码器 |
| duration                | uint64_t|缓存数据长度 |
| indexcount              | uint32_t|索引个数 |

### 接口概览 
####内部接口

| 方法                    | 说明        |
|-------------------------|------------|
| MbsDataFileOpen         | 打开一个缓冲文件获取它的句柄。 |

| 方法                    | 说明        |
|-------------------------|------------|
| MbsDataFileRead         | 从缓冲文件中读取数据，数据以MbsData格式封装。 |

| 方法                    | 说明        |
|-------------------------|------------|
| MbsDataFileWrite        | 把以MbsData格式封装的数据写入到，缓冲数据文件。 |

| 方法                    | 说明        |
|------------------------ |------------|
| MbsDataFileClose        | 关闭缓冲数据文件句柄。 |

